# =============================================================================
# SET Comprobantes Backend — Variables de entorno
# Copiar este archivo a .env y completar los valores reales.
# NUNCA commitear .env al repositorio.
# =============================================================================

# -----------------------------------------------------------------------------
# Servidor HTTP (Fastify)
# -----------------------------------------------------------------------------
PORT=4000
NODE_ENV=development
DEBUG=false

# -----------------------------------------------------------------------------
# PostgreSQL
# Formato: postgresql://usuario:contraseña@host:puerto/nombre_db
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://postgres:password@localhost:5432/set_comprobantes
DB_POOL_MIN=2
DB_POOL_MAX=10

# -----------------------------------------------------------------------------
# Seguridad — Cifrado AES-256-GCM
# Mínimo 32 caracteres. CRÍTICO: nunca cambiar en producción sin re-cifrar DB.
# En producción usar HashiCorp Vault o AWS Secrets Manager.
# -----------------------------------------------------------------------------
ENCRYPTION_KEY=change_me_32_chars_minimum_please!

# -----------------------------------------------------------------------------
# SolveCaptcha — Resolución de reCAPTCHA para descarga XML en eKuatia
# Obtener API Key en: https://solvecaptcha.com/
# Se puede sobreescribir por tenant en tenant_config.extra_config.solvecaptcha_api_key
# -----------------------------------------------------------------------------
SOLVECAPTCHA_API_KEY=your_solvecaptcha_api_key_here

# -----------------------------------------------------------------------------
# Worker — Cola de jobs PostgreSQL
# -----------------------------------------------------------------------------
WORKER_POLL_INTERVAL_MS=5000
WORKER_MAX_CONCURRENT_JOBS=3

# -----------------------------------------------------------------------------
# Scheduler — Expresión cron para encolar sincronizaciones automáticas
# Formato estándar: minuto hora dia-mes mes dia-semana
# Ejemplos:
#   */5 * * * *   → cada 5 minutos (default)
#   0 * * * *     → cada hora en punto
#   0 3 * * *     → todos los días a las 3:00 AM
#   0 */2 * * *   → cada 2 horas
# -----------------------------------------------------------------------------
CRON_SCHEDULE=*/5 * * * *

# -----------------------------------------------------------------------------
# Puppeteer — Automatización headless de Marangatu
# PUPPETEER_HEADLESS=false para ver el browser durante desarrollo/debug
# -----------------------------------------------------------------------------
PUPPETEER_HEADLESS=true
PUPPETEER_TIMEOUT_MS=30000
MARANGATU_BASE_URL=https://marangatu.set.gov.py
